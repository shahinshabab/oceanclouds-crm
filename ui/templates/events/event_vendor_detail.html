{% extends "ui/base.html" %}
{% load roles_tags %}
{% block title %}Vendor Assignment – {{ event_vendor.vendor }}{% endblock %}
{% block content %}
{% is_admin as is_admin %}
{% is_manager as is_manager %}
{% is_employee as is_employee %}
<div class="container py-3 max-w-2xl">

  <!-- Heading -->
  <h2 class="fw-semibold mb-4">Vendor Assignment</h2>

  <!-- Main Card -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">

      <div class="row">
        <!-- Col 1: Event / Vendor -->
        <div class="col-md-4 mb-3">
          <div class="text-uppercase text-muted small">Event</div>
          <div class="fw-semibold mb-2">
            {% if event_vendor.event %}
              <a href="{% url 'events:event_detail' event_vendor.event.pk %}">
                {{ event_vendor.event.name }}
              </a>
            {% else %}
              —
            {% endif %}
          </div>

          <div class="text-uppercase text-muted small">Vendor</div>
          <div class="fw-semibold mb-2">
            <a href="{% url 'services:vendor_detail' event_vendor.vendor.pk %}">
              {{ event_vendor.vendor }}
            </a>
          </div>
        </div>

        <!-- Col 2: Service / Role -->
        <div class="col-md-4 mb-3">
          <div class="text-uppercase text-muted small">Service</div>
          <div class="fw-semibold mb-2">
            {% if event_vendor.service %}
              <a href="{% url 'services:service_detail' event_vendor.service.pk %}">
                {{ event_vendor.service }}
              </a>
            {% else %}
              —
            {% endif %}
          </div>

          <div class="text-uppercase text-muted small">Role</div>
          <div class="fw-semibold mb-2">{{ event_vendor.role }}</div>
        </div>

        <!-- Col 3: Estimate / Actual / Confirmed -->
        <div class="col-md-4 mb-3">
          <div class="text-uppercase text-muted small">Cost Estimate</div>
          <div class="fw-semibold mb-2">{{ event_vendor.cost_estimate }}</div>

          <div class="text-uppercase text-muted small">Cost Actual</div>
          <div class="fw-semibold mb-2">
            {{ event_vendor.cost_actual|default:"-" }}
          </div>

          <div class="text-uppercase text-muted small">Confirmed</div>
          <div class="fw-semibold mb-2">
            {% if event_vendor.is_confirmed %}
              <span class="badge bg-success">Yes</span>
            {% else %}
              <span class="badge bg-secondary">No</span>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Notes -->
      <div class="mt-2">
        <div class="text-uppercase text-muted small mb-1">Notes</div>
        <div class="fw-semibold">
          {{ event_vendor.notes|default:"-" }}
        </div>
      </div>

    </div>
  </div>

  <!-- Action Buttons -->
  <div class="d-flex justify-content-center gap-2">
    {% if is_admin or is_manager %}
      <a href="{% url 'events:event_vendor_update' event_vendor.pk %}" class="btn btn-primary">
        Edit Assignment
      </a>
    {% endif %}
    <a href="{% url 'events:event_vendor_list' %}" class="btn btn-outline-secondary">
      Back to Event Vendors
    </a>
  </div>

</div>
{% endblock %}
