{% extends "ui/base.html" %}
{% load roles_tags %}
{% block title %}Checklist – {{ item.title }}{% endblock %}
{% block content %}
{% is_admin as is_admin %}
{% is_manager as is_manager %}
{% is_employee as is_employee %}
<div class="container py-3 max-w-2xl">

  <!-- Heading -->
  <h2 class="fw-semibold mb-4">{{ item.title }}</h2>

  <!-- Main Card -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">

      <div class="row">
        <!-- Col 1: Event / Category -->
        <div class="col-md-4 mb-3">
          <div class="text-uppercase text-muted small">Event</div>
          <div class="fw-semibold mb-2">
            {% if item.event %}
              <a href="{% url 'events:event_detail' item.event.pk %}">
                {{ item.event.name }}
              </a>
            {% else %}
              —
            {% endif %}
          </div>

          <div class="text-uppercase text-muted small">Category</div>
          <div class="fw-semibold mb-2">{{ item.get_category_display }}</div>
        </div>

        <!-- Col 2: Due Date / Status -->
        <div class="col-md-4 mb-3">
          <div class="text-uppercase text-muted small">Due Date</div>
          <div class="fw-semibold mb-2">
            {% if item.due_date %}
              {{ item.due_date }}
            {% else %}
              —
            {% endif %}
          </div>

          <div class="text-uppercase text-muted small">Status</div>
          <div class="fw-semibold mb-2">
            {% if item.is_done %}
              <span class="badge bg-success">Done</span>
            {% else %}
              <span class="badge bg-secondary">Pending</span>
            {% endif %}
          </div>
        </div>

        <!-- Col 3: Assigned To / Vendor -->
        <div class="col-md-4 mb-3">
          <div class="text-uppercase text-muted small">Assigned To</div>
          <div class="fw-semibold mb-2">
            {{ item.assigned_to|default:"—" }}
          </div>

          <div class="text-uppercase text-muted small">Vendor</div>
          <div class="fw-semibold mb-2">
            {{ item.vendor|default:"—" }}
          </div>
        </div>
      </div>

      <!-- Notes -->
      <div class="mt-2">
        <div class="text-uppercase text-muted small mb-1">Notes</div>
        <div class="fw-semibold">
          {{ item.notes|default:"—" }}
        </div>
      </div>

    </div>
  </div>

  <!-- Action Buttons -->
  <div class="d-flex justify-content-center gap-2">
    {% if is_admin or is_manager %}
      <a href="{% url 'events:checklist_update' item.pk %}" class="btn btn-primary">
        Edit Checklist Item
      </a>
    {% endif %}
    <a href="{% url 'events:checklist_list' %}" class="btn btn-outline-secondary">
      Back to Checklist
    </a>
  </div>

</div>
{% endblock %}
