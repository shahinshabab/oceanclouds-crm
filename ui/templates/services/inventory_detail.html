{% extends "ui/base.html" %}
{% load roles_tags %}

{% block title %}Inventory – {{ inventory_item.name }}{% endblock %}

{% block content %}
{% is_admin as is_admin %}
{% is_manager as is_manager %}
{% is_employee as is_employee %}

<div class="container py-4">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="fw-semibold mb-1">{{ inventory_item.name }}</h2>
      {% if inventory_item.sku %}
        <div class="text-muted small">SKU: {{ inventory_item.sku }}</div>
      {% endif %}
    </div>

    {% if is_admin or is_manager %}
      <a href="{% url 'services:inventory_update' inventory_item.pk %}" class="btn btn-primary btn-sm">
        Edit Item
      </a>
    {% endif %}
  </div>

  <!-- Details -->
  <div class="card mb-3">
    <div class="card-body">
      <div class="row gy-3">

        <div class="col-md-4">
          <div class="text-uppercase text-muted small">Service</div>
          <div class="fw-semibold">
            {% if inventory_item.service %}
              <a href="{% url 'services:service_detail' inventory_item.service.pk %}">
                {{ inventory_item.service.name }}
              </a>
            {% else %}
              <span class="text-muted">—</span>
            {% endif %}
          </div>
        </div>

        <div class="col-md-4">
          <div class="text-uppercase text-muted small">Total quantity</div>
          <div class="fw-semibold">
            {{ inventory_item.quantity_total }} {{ inventory_item.unit }}
          </div>
        </div>

        <div class="col-md-4">
          <div class="text-uppercase text-muted small">Available</div>
          <div class="fw-semibold">
            {{ inventory_item.quantity_available }} {{ inventory_item.unit }}
          </div>
        </div>

        <div class="col-md-4">
          <div class="text-uppercase text-muted small">Location</div>
          <div class="fw-semibold">
            {{ inventory_item.location|default:"—" }}
          </div>
        </div>

        <div class="col-12">
          <div class="text-uppercase text-muted small">Notes</div>
          <div>
            {% if inventory_item.notes %}
              {{ inventory_item.notes|linebreaksbr }}
            {% else %}
              <span class="text-muted">—</span>
            {% endif %}
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Actions -->
  <div class="text-center">
    <a href="{% url 'services:inventory_list' %}" class="btn btn-outline-secondary me-2">
      Back to Inventory
    </a>
    {% if is_admin or is_manager %}
      <a href="{% url 'services:inventory_update' inventory_item.pk %}" class="btn btn-primary">
        Edit Item
      </a>
    {% endif %}
  </div>

</div>
{% endblock %}
